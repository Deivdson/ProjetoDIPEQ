{% extends "swenergy/base.html" %}
{% load static %}
<!DOCTYPE html>
<html>
<head>
    {% block head %}
    <meta charset="UTF-8">
    <title>SW Energy</title>
    <!--
    <script type="text/javascript" src="/JSC/jquery-latest.min.js"></script>
    <script type="text/javascript" src="/JSC/JSCharting.js"></script>
    -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load("current", {packages:['corechart']});
        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {
          {% for sensor in sensores %}
          var data = google.visualization.arrayToDataTable([
            ["Element", "Density", { role: "style" } ],
            {% for consumo in sensor.consumo_set.all %}
            ['{{consumo.data}}', {{ consumo.total }}, "#b87333"],
            {% endfor %}
          ]);
    
          var view = new google.visualization.DataView(data);
          view.setColumns([0, 1,
                           { calc: "stringify",
                             sourceColumn: 1,
                             type: "string",
                             role: "annotation" },
                           2]);
    
          var options = {
            title: "Gráfico consumo diário - {{sensor}}",
            width: 600,
            height: 400,
            bar: {groupWidth: "95%"},
            legend: { position: "none" },
          };
          var chart = new google.visualization.ColumnChart(document.getElementById("{{sensor}}"));
          chart.draw(view, options);
          {% endfor %}
      }
    </script>
    {% endblock %}
</head>
{% block conteudo %}
<body>
  <style>
    body{
        font-size: 20pt;
    }
    input{
        font-size: 30pt;
    }
    button{
        font-size: 30pt;
    }
  </style>
    <script type="text/javascript" src="https://jscharting.com/JSC15/JSCharting.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>


    <h1>Tela Inicial</h1>

    

    <label>Sensores:</label>
    <ul>
        {% for sensor in sensores %}
        <li><a href="{% url 'swenergy:detalhes' sensor.id%}">{{sensor.titulo}} - ID: {{sensor.id}}</a></li>
        {% endfor %}
    </ul>

    {% for sensor in sensores %}
    <div id="{{sensor}}" style="width: 900px; height: 300px;"></div>
    {% endfor %}

    <br><br>
    <br><br>
    <br><br>
    <fieldset>
      Dados gerais:
      <section>
          Data:
          <p>{{data}}</p>
          JSON:
          <p>{{json}}</p>
          Sessão:
          <p>{{session}}</p>
          Args:
          <p>{{args}}</p>
          Kwargs:
          <p>{{kwargs}}</p>

          <br>

          Atributos:
          <ul>
              <li>pt: {{pt}}</li>
          </ul>>
      
      </section>
    </fieldset>
    <!--
    <form>
        {% csrf_token %}
        <input type="submit" value="enviar">
    </form>
    -->
</body>    
{% endblock %}
</html>